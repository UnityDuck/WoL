# Управление компьютерами в классах - MVVM Архитектура

## Обзор

Это приложение представляет собой систему управления компьютерами в учебных классах, переписанную с использованием архитектуры MVVM (Model-View-ViewModel) и с использованием PostgreSQL в качестве основной базы данных.

## Архитектура MVVM

Проект следует паттерну Model-View-ViewModel:

- **Model**: Содержит бизнес-логику и работу с данными (модели данных, сервисы, база данных)
- **View**: Представляет пользовательский интерфейс (без бизнес-логики)
- **ViewModel**: Связующее звено между Model и View, содержит логику представления

## Основные улучшения

1. **MVVM архитектура**: Четкое разделение ответственности между слоями
2. **PostgreSQL**: Переход с SQLite на PostgreSQL с использованием psycopg2
3. **Динамическая соль**: Улучшенная безопасность хеширования паролей
4. **Обработка ошибок**: Добавлены обработчики ошибок на всех уровнях
5. **Валидация данных**: Проверка входных данных
6. **Улучшенный UI/UX**: Более современный и удобный интерфейс

## Структура проекта

```
/workspace/
├── main.py                 # Главная точка входа
├── run_app.py             # Скрипт запуска с проверкой подключения
├── config.py              # Конфигурация приложения
├── requirements.txt       # Зависимости
├── models/                # Модельный слой
│   ├── __init__.py
│   ├── database.py        # Менеджер базы данных
│   ├── user.py            # Модель пользователя
│   ├── computer.py        # Модель компьютера
│   ├── auth_service.py    # Сервис аутентификации
│   ├── computer_service.py # Сервис работы с компьютерами
│   └── settings_service.py # Сервис настроек
├── viewmodels/            # ViewModel слой
│   ├── __init__.py
│   ├── base_viewmodel.py  # Базовый ViewModel
│   ├── login_viewmodel.py # ViewModel для входа
│   └── main_viewmodel.py  # ViewModel для главного окна
├── views/                 # View слой (UI)
│   ├── __init__.py
│   ├── login_view.py      # Окно входа
│   └── main_view.py       # Главное окно
└── utils/                 # Утилиты
    ├── __init__.py
    └── theme_manager.py   # Управление темами
```

## Установка и запуск

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Убедитесь, что PostgreSQL запущен и настроен

3. Запустите приложение:
```bash
python run_app.py
```

## Настройка базы данных

По умолчанию приложение использует следующие параметры подключения:

- Хост: localhost
- Порт: 5432
- База данных: pc_manager
- Пользователь: postgres
- Пароль: postgres

Эти параметры можно изменить с помощью переменных окружения:
- `DB_HOST`
- `DB_PORT`
- `DB_NAME`
- `DB_USER`
- `DB_PASSWORD`

## Учетные данные по умолчанию

- Логин: `teacher`, Пароль: `123456`
- Логин: `admin`, Пароль: `admin123`

## Особенности реализации

- **Динамическая соль**: Каждый пароль хешируется с уникальной солью
- **Обработка ошибок**: Все потенциально опасные операции обернуты в try-catch
- **Разделение ответственности**: Каждый класс имеет четко определенную роль
- **Типизация**: Использована аннотация типов для лучшей читаемости
- **Сигналы PyQt**: Используются для связи между слоями без жесткой зависимости

## Ветвление и задачи

Для каждой новой функциональности создавайте отдельную ветку и задачу:

1. Создайте ветку `production` как основную
2. Для каждого улучшения создавайте отдельную ветку (например, `feature/user-authentication`)
3. После завершения работы сливайте в ветку `production`

## Безопасность

- Пароли хешируются с использованием PBKDF2 с динамической солью
- SQL-инъекции предотвращаются использованием параметризованных запросов
- Валидация входных данных на всех уровнях